<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search for Nurses</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="search-container">
        <form id="searchForm">
            <input type="text" id="searchInput" name="search" placeholder="Search for a nurse...">
            <button type="submit">Search</button>
        </form>
    </div>

    <div id="results">
        <!-- Search results will appear here -->
    </div>

    <script>
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Prevent page reload

            const searchValue = document.getElementById('searchInput').value;
            if (searchValue) {
                fetchResults(searchValue);
            } else {
                alert('Please enter a name to search.');
            }
        });

        function fetchResults(search) {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', `search_nurse.php?search=${encodeURIComponent(search)}`, true);

            xhr.onload = function() {
                if (this.status === 200) {
                    try {
                        const results = JSON.parse(this.responseText);
                        let output = '';

                        if (results.length > 0) {
                            results.forEach(function(nurse) {
                                output += `
                                    <div class="nurse">
                                        <img src="${nurse.photo}" alt="${nurse.name}">
                                        <h2>${nurse.name}</h2>
                                        <p>Specialization: ${nurse.specialization}</p>
                                        <p>Contact: ${nurse.contact_info}</p>
                                        <p>Status: ${nurse.availability_status}</p>
                                        <p>Rating: ${nurse.rating}</p>
                                    </div>
                                `;
                            });
                        } else {
                            output = '<p>No nurses found.</p>';
                        }

                        document.getElementById('results').innerHTML = output;
                    } catch (e) {
                        console.error('Error parsing JSON:', e);
                    }
                } else {
                    console.error('Error fetching data:', this.statusText);
                }
            };

            xhr.onerror = function() {
                console.error('Request error');
            };

            xhr.send();
        }
    </script>
</body>
</html>
